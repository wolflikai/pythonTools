# !/usr/bin/python3# -*- coding:utf-8 -*-"""    @author: Kay Lee    @time: 2019/9/2 14:18    @email: wolflikai@163.com    @file: main.py    @description: """""from smtplib import SMTP_SSLfrom email.mime.text import MIMETextfrom email.header import Headerto = ['1013503865@qq.com']def send_email(project_name, finished_time):    content = f"{project_name} 已经于北京时间 {finished_time} 完成建模, 请注意及时检查模型质量"    # 第三方 SMTP服务    mail_host = os.getenv('MAIL_SERVER')  # 设置服务器    mail_user = os.getenv('MAIL_USERNAME')  # 用户名    mail_pass = os.getenv('MAIL_PASSWORD')  # 口令    sender = os.getenv('SENDER', os.getenv('MAIL_USERNAME'))    receivers = to    def _format_addr(s):        name, addr = parseaddr(s)        return formataddr((Header(name, 'utf-8').encode(), addr))    message = MIMEText(content, 'plain', 'utf-8')    message['From'] = _format_addr(f' {mail_user}')    message['To'] = _format_addr(f'Kay {to}')    message['Subject'] = Header(f'通知消息:{project_name} 已经完成建模任务', 'utf-8')    smtp = SMTP_SSL(mail_host)    smtp.ehlo(mail_host)    smtp.login(mail_user, mail_pass)    smtp.sendmail(sender, receivers, message.as_string())    smtp.quit()if __name__ == '__main__':    import dotenv    dotenv.load_dotenv(os.path.join('E:/software', '.env'))    send_email('dgene-test', '2019-10-10')